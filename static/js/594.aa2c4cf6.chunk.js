"use strict";(self.webpackChunkposts_project=self.webpackChunkposts_project||[]).push([[594],{151:(s,e,t)=>{t.d(e,{E:()=>i});var a=t(579);const i=s=>{let{children:e,slug:t,action:i,disabled:r=!1,tagStore:l}=s;return(0,a.jsx)("button",{className:l.includes(t)?"tag-badge__active":"tag-badge",disabled:r,onClick:()=>{i(t)},children:(0,a.jsx)("p",{children:e})})}},325:(s,e,t)=>{t.d(e,{m:()=>i});var a=t(579);const i=s=>{let{children:e}=s;return(0,a.jsx)("div",{className:"container",children:e})}},551:(s,e,t)=>{t.d(e,{Q:()=>r});var a=t(791),i=t(579);const r=s=>{let{children:e}=s;const{isLogged:t}=(0,a.N)();return t?(0,i.jsx)(i.Fragment,{children:e}):(0,i.jsx)("div",{})}},594:(s,e,t)=>{t.r(e),t.d(e,{default:()=>S});var a=t(43);var i=t(941),r=t(3),l=t(645),c=t(579);const n=()=>{const[s,e]=(0,a.useState)(""),t=function(s,e){const[t,i]=(0,a.useState)(s);return(0,a.useEffect)((()=>{const t=setTimeout((()=>{i(s)}),e);return()=>{clearTimeout(t)}}),[e,s]),t}(s,500),n=(0,r.wA)();return(0,a.useEffect)((()=>{s&&n((0,i.Bs)(s))}),[t]),(0,c.jsx)("div",{children:(0,c.jsx)(l.p,{type:"text",value:s,setValue:e,label:"Search post...",name:"search-query"})})},o=s=>{let{defaultValue:e,options:t,setValue:a}=s;return(0,c.jsxs)("select",{className:"custom-select",defaultValue:e,onChange:s=>a(s.target.value),children:[(0,c.jsx)("option",{disabled:!0,className:"custom-select-default-option",children:e}),t.map(((s,e)=>(0,c.jsx)("option",{className:"custom-select-option",children:s},e)))]})};var d=t(430);const u=()=>{const[s,e]=(0,a.useState)(""),t=(0,r.wA)();return(0,a.useEffect)((()=>{t((0,d.di)(s))}),[s,t]),(0,c.jsx)("div",{children:(0,c.jsx)(o,{options:["Likes","Dislikes","Views"],defaultValue:"------",setValue:e})})};var p=t(151);const x=s=>{let{getSlug:e,tagStore:t}=s;const{data:a}=(0,r.d4)((s=>s.posts.postsTags));return(0,c.jsx)(c.Fragment,{children:a&&(0,c.jsxs)("div",{className:"tag-box",children:[" ",a.map((s=>(0,c.jsx)(p.E,{slug:s.slug,action:e,tagStore:t,children:s.name},s.slug)))]})})},m=()=>{const s=(0,r.wA)(),{tag:e}=(0,r.d4)((s=>s.posts));return(0,c.jsxs)("div",{className:"posts-filter",children:[(0,c.jsx)(n,{}),(0,c.jsx)("h4",{children:"Sort by:"}),(0,c.jsx)(u,{}),(0,c.jsx)(x,{getSlug:e=>{s((0,i.DD)(e))},tagStore:e})]})};var j=t(891),h=t(902),g=t(655),v=t(929),w=t(63),N=t(88),f=t(137);const y=()=>{const{id:s,firstName:e,lastName:t,image:i}=(0,r.d4)((s=>s.user.data)),[n,o]=(0,a.useState)(!1),u=(0,r.wA)(),[p,m]=(0,a.useState)(""),[j,y]=(0,a.useState)(""),[b,k]=(0,a.useState)([]),{notify:S,notifyPortal:_}=(0,f.l)(),{post:A}=(0,N.A)("https://dummyjson.com");return(0,c.jsxs)("div",{children:[(0,c.jsx)(g.$,{icon:n?v.$_H:v.cUH,style:{color:"black"},action:()=>o((s=>!s)),children:"Write post"}),(0,c.jsxs)("div",{className:n?"post-input__visible":"post-input",children:[(0,c.jsx)("h4",{children:"Choose tags:"}),(0,c.jsx)(x,{getSlug:s=>{k([...b,s])},tagStore:b}),(0,c.jsx)(l.p,{value:j,setValue:y,type:"text",label:"Post title:",name:"post-title"}),(0,c.jsx)(h.f,{value:p,setValue:m,label:"Post text:"}),(0,c.jsx)(g.$,{action:async()=>{const a={id:Math.floor(20001*Math.random())+1e4,userId:s,user:{firstName:e,lastName:t,image:i},comments:[],rate:"",postImage:await(0,w.aK)(j),rated:!1,title:j,body:p,tags:b,views:0,reactions:{likes:0,dislikes:0}};u((0,d.SD)(a)),S("New post added!","success"),await A("posts/add",a)},payload:{body:p,title:j,tags:b},icon:v.isI,style:{color:"black"},children:"Send post"})]}),_]})};var b=t(551);const k=()=>{const s=(0,r.wA)(),{data:e}=(0,r.d4)((s=>s.posts.postsList)),t=(0,a.useRef)(!1);return(0,a.useEffect)((()=>{t.current?(s((0,i.y9)()),s((0,i.un)())):t.current=!0}),[s]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(b.Q,{children:(0,c.jsx)(y,{})}),(0,c.jsx)("div",{className:"post-list",children:e.map((s=>(0,c.jsx)(j.L,{post:s},s.id)))})]})},S=()=>(0,c.jsxs)("main",{children:[(0,c.jsx)(m,{}),(0,c.jsx)(k,{})]})},704:(s,e,t)=>{t.d(e,{R:()=>g});var a=t(151),i=t(3),r=t(941),l=t(579);const c=s=>{let{tags:e,tagsStore:t}=s;const c=(0,i.wA)(),n=s=>{c((0,r.DD)(s))};return(0,l.jsx)("div",{className:"badge-container",children:e.map(((s,e)=>(0,l.jsx)(a.E,{slug:s,action:n,tagStore:t,children:s},e)))})};var n=t(260),o=t(325),d=t(929),u=t(655),p=t(910);const x=s=>{let{views:e}=s;return(0,l.jsxs)("div",{className:"view-container",children:[(0,l.jsx)("div",{className:"view-container__icon",children:(0,l.jsx)(p.g,{icon:d.pS3})}),(0,l.jsx)("div",{className:"view-container__counter",children:(0,l.jsx)("p",{children:e})})]})};var m=t(88),j=t(430),h=t(43);const g=s=>{let{link:e,post:t}=s;const{pathname:a}=(0,n.zy)(),p=Number(a.split("/").at(-1)),{get:g,patch:v}=(0,m.A)("https://dummyjson.com"),{tag:w}=(0,i.d4)((s=>s.posts)),{id:N}=(0,i.d4)((s=>s.user.data)),{ratePost:f,ratePagedPost:y}=(s=>{let{post:e,getPost:t,patchPost:a}=s;const l=(0,i.wA)();return{ratePost:(0,h.useCallback)((async s=>{const{rated:i,rate:c}=e,n={...await t(`posts/${e.id}`),user:e.user,postImage:e.postImage},o=async()=>{const s=(0,r.Af)(e.id);await a(`posts/${e.id}`,{reactions:null===s||void 0===s?void 0:s.reactions})};i&&c===s?(l((0,j.vj)({post:n})),await o()):(l((0,j.vj)({post:n,reaction:s})),await o())}),[e,l,t,a]),ratePagedPost:(0,h.useCallback)((async s=>{const{rated:i,rate:c}=e,n={...await t(`posts/${e.id}`),user:e.user,postImage:e.postImage},o=async()=>{const s=(0,r.Af)(e.id);await a(`posts/${e.id}`,{reactions:null===s||void 0===s?void 0:s.reactions})};i&&c===s?(l((0,j.kQ)({post:n})),await o()):(l((0,j.kQ)({post:n,reaction:s})),await o())}),[e,l,t,a])}})({post:t,getPost:g,patchPost:v}),b=async s=>{"liked"===s?await f("liked"):await f("disliked")},k=async s=>{"liked"===s?await y("liked"):await y("disliked")};return(0,l.jsxs)("article",{className:"post-card",children:[(0,l.jsxs)("div",{className:"post-card__header",children:[t.user?(0,l.jsxs)(o.m,{children:[(0,l.jsx)("img",{src:t.user.image,alt:t.user.firstName+" "+t.user.lastName+" avatar"}),(0,l.jsx)("h5",{children:t.user.firstName+" "+t.user.lastName})]}):(0,l.jsx)("div",{}),(0,l.jsx)(c,{tags:t.tags,tagsStore:w})]}),(0,l.jsxs)("div",{className:"post-card__body",children:[(0,l.jsx)("h2",{children:t.title}),p?(0,l.jsx)("img",{src:t.postImage,alt:t.title}):(0,l.jsx)(n.k2,{to:e,children:(0,l.jsx)("img",{src:t.postImage,alt:t.title})}),p?(0,l.jsx)("p",{children:t.body}):(0,l.jsx)(n.k2,{to:e,children:t.body})]}),(0,l.jsxs)("div",{className:"post-card__footer",children:[(0,l.jsx)(x,{views:t.views}),(0,l.jsxs)(o.m,{children:[(0,l.jsx)(u.$,{icon:d.Wcv,action:p?k:b,payload:"liked",isAuthOnly:!0,disabled:t.userId===N,style:{color:"blue"},children:t.reactions.likes}),(0,l.jsx)(u.$,{icon:d.lS9,action:p?k:b,payload:"disliked",isAuthOnly:!0,disabled:t.userId===N,style:{color:"red"},children:t.reactions.dislikes})]})]})]})}},891:(s,e,t)=>{t.d(e,{L:()=>l});var a=t(260),i=t(704),r=t(579);const l=s=>{let{post:e}=s;const t=(0,a.zy)();return(0,r.jsx)(i.R,{link:`${t.pathname}/${e.id}`,post:e})}},902:(s,e,t)=>{t.d(e,{f:()=>r});var a=t(43),i=t(579);const r=s=>{let{value:e,setValue:t,label:r,required:l=!1,rows:c=4}=s;const[n,o]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!!e);return(0,a.useEffect)((()=>{u(!!e)}),[e]),(0,i.jsxs)("div",{className:`textarea-container ${n?"focused":""} ${d?"has-value":""}`,children:[r&&(0,i.jsxs)("label",{className:"textarea-label "+(n||d?"label-up":""),children:[r,l&&(0,i.jsx)("span",{className:"required-star",children:"*"})]}),(0,i.jsx)("textarea",{value:e,onChange:s=>t(s.target.value),onFocus:()=>o(!0),onBlur:()=>o(!1),className:"styled-textarea",rows:c}),(0,i.jsx)("div",{className:"textarea-underline",children:(0,i.jsx)("div",{className:"underline-animation "+(n?"active":"")})})]})}}}]);
//# sourceMappingURL=594.aa2c4cf6.chunk.js.map