"use strict";(self.webpackChunkposts_project=self.webpackChunkposts_project||[]).push([[888],{151:(s,t,e)=>{e.d(t,{E:()=>i});var a=e(579);const i=s=>{let{children:t,slug:e,action:i,disabled:d=!1,tagStore:r}=s;return(0,a.jsx)("button",{className:r.includes(e)?"tag-badge__active":"tag-badge",disabled:d,onClick:()=>{i(e)},children:(0,a.jsx)("p",{children:t})})}},325:(s,t,e)=>{e.d(t,{m:()=>i});var a=e(579);const i=s=>{let{children:t}=s;return(0,a.jsx)("div",{className:"container",children:t})}},704:(s,t,e)=>{e.d(t,{R:()=>x});var a=e(151),i=e(3),d=e(941),r=e(579);const c=s=>{let{tags:t,tagsStore:e}=s;const c=(0,i.wA)(),o=s=>{c((0,d.DD)(s))};return(0,r.jsx)("div",{className:"badge-container",children:t.map(((s,t)=>(0,r.jsx)(a.E,{slug:s,action:o,tagStore:e,children:s},t)))})};var o=e(260),l=e(325),n=e(929),p=e(655),u=e(910);const h=s=>{let{views:t}=s;return(0,r.jsxs)("div",{className:"view-container",children:[(0,r.jsx)("div",{className:"view-container__icon",children:(0,r.jsx)(u.g,{icon:n.pS3})}),(0,r.jsx)("div",{className:"view-container__counter",children:(0,r.jsx)("p",{children:t})})]})};var j=e(88),m=e(430),v=e(43);const x=s=>{let{link:t,post:e}=s;const{pathname:a}=(0,o.zy)(),u=Number(a.split("/").at(-1)),{get:x,patch:g}=(0,j.A)("https://dummyjson.com"),{tag:k}=(0,i.d4)((s=>s.posts)),{id:w}=(0,i.d4)((s=>s.user.data)),{ratePost:y,ratePagedPost:b}=(s=>{let{post:t,getPost:e,patchPost:a}=s;const r=(0,i.wA)();return{ratePost:(0,v.useCallback)((async s=>{const{rated:i,rate:c}=t,o={...await e(`posts/${t.id}`),user:t.user,postImage:t.postImage},l=async()=>{const s=(0,d.Af)(t.id);await a(`posts/${t.id}`,{reactions:null===s||void 0===s?void 0:s.reactions})};i&&c===s?(r((0,m.vj)({post:o})),await l()):(r((0,m.vj)({post:o,reaction:s})),await l())}),[t,r,e,a]),ratePagedPost:(0,v.useCallback)((async s=>{const{rated:i,rate:c}=t,o={...await e(`posts/${t.id}`),user:t.user,postImage:t.postImage},l=async()=>{const s=(0,d.Af)(t.id);await a(`posts/${t.id}`,{reactions:null===s||void 0===s?void 0:s.reactions})};i&&c===s?(r((0,m.kQ)({post:o})),await l()):(r((0,m.kQ)({post:o,reaction:s})),await l())}),[t,r,e,a])}})({post:e,getPost:x,patchPost:g}),N=async s=>{"liked"===s?await y("liked"):await y("disliked")},_=async s=>{"liked"===s?await b("liked"):await b("disliked")};return(0,r.jsxs)("article",{className:"post-card",children:[(0,r.jsxs)("div",{className:"post-card__header",children:[e.user?(0,r.jsxs)(l.m,{children:[(0,r.jsx)("img",{src:e.user.image,alt:e.user.firstName+" "+e.user.lastName+" avatar"}),(0,r.jsx)("h5",{children:e.user.firstName+" "+e.user.lastName})]}):(0,r.jsx)("div",{}),(0,r.jsx)(c,{tags:e.tags,tagsStore:k})]}),(0,r.jsxs)("div",{className:"post-card__body",children:[(0,r.jsx)("h2",{children:e.title}),u?(0,r.jsx)("img",{src:e.postImage,alt:e.title}):(0,r.jsx)(o.k2,{to:t,children:(0,r.jsx)("img",{src:e.postImage,alt:e.title})}),u?(0,r.jsx)("p",{children:e.body}):(0,r.jsx)(o.k2,{to:t,children:e.body})]}),(0,r.jsxs)("div",{className:"post-card__footer",children:[(0,r.jsx)(h,{views:e.views}),(0,r.jsxs)(l.m,{children:[(0,r.jsx)(p.$,{icon:n.Wcv,action:u?_:N,payload:"liked",isAuthOnly:!0,disabled:e.userId===w,style:{color:"blue"},children:e.reactions.likes}),(0,r.jsx)(p.$,{icon:n.lS9,action:u?_:N,payload:"disliked",isAuthOnly:!0,disabled:e.userId===w,style:{color:"red"},children:e.reactions.dislikes})]})]})]})}},888:(s,t,e)=>{e.r(t),e.d(t,{default:()=>o});var a=e(43),i=e(3),d=e(704),r=e(63),c=e(579);const o=()=>{const{data:s}=(0,i.d4)((s=>s.user)),[t,e]=(0,a.useState)();return(0,a.useEffect)((()=>{s.id&&(0,r.pd)(s.id,e)}),[s.id]),(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{children:"My posts:"}),s&&t&&(null===t||void 0===t?void 0:t.map((s=>(0,c.jsx)(d.R,{post:s,link:`/posts/${s.id}`},s.id))))]})}}}]);
//# sourceMappingURL=888.5a988152.chunk.js.map