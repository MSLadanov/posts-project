{"version":3,"file":"static/js/888.5a988152.chunk.js","mappings":"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","sources":["components/ui/TagBadge/TagBadge.tsx","components/ui/Container/Container.tsx","components/BadgeContainer/BadgeContainer.tsx","components/ViewsContainer/ViewsContainer.tsx","hooks/useRatePost.ts","components/PostCard/PostCard.tsx","components/UserPosts/UserPosts.tsx"],"sourcesContent":["import { ReactElement } from \"react\";\r\nimport \"./style.scss\";\r\n\r\ntype TTagBadgeProps = {\r\n  children: string;\r\n  slug: string;\r\n  disabled?: boolean\r\n  action: (slug: string) => void;\r\n  tagStore: string[]\r\n};\r\n\r\nexport const TagBadge = ({\r\n  children,\r\n  slug,\r\n  action,\r\n  disabled = false, \r\n  tagStore\r\n}: TTagBadgeProps): ReactElement => {\r\n  return (\r\n    <button\r\n      className={tagStore.includes(slug) ? \"tag-badge__active\" : \"tag-badge\"}\r\n      disabled={disabled}\r\n      onClick={() => {\r\n        action(slug);\r\n      }}\r\n    >\r\n      <p>{children}</p>\r\n    </button>\r\n  );\r\n};\r\n","import { PropsWithChildren, ReactElement } from \"react\";\r\n\r\nexport const Container = ({ children }: PropsWithChildren): ReactElement => {\r\n  return <div className=\"container\">{children}</div>;\r\n};\r\n","import { ReactElement } from \"react\";\r\nimport { TagBadge } from \"@ui/TagBadge\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { AppDispatch } from \"@/store\";\r\nimport { fetchPostsByTag } from \"@/store/posts.api\";\r\nimport \"./style.scss\";\r\n\r\ntype TBadgeContainerProps = {\r\n  tags: string[];\r\n  tagsStore: string[];\r\n};\r\n\r\nexport const BadgeContainer: React.FC<TBadgeContainerProps> = ({\r\n  tags,\r\n  tagsStore,\r\n}): ReactElement => {\r\n  const dispatch = useDispatch<AppDispatch>();\r\n  const sortByTag = (slug: string) => {\r\n    dispatch(fetchPostsByTag(slug));\r\n  };\r\n  return (\r\n    <div className=\"badge-container\">\r\n      {tags.map((tag, index) => (\r\n        <TagBadge key={index} slug={tag} action={sortByTag} tagStore={tagsStore}>\r\n          {tag}\r\n        </TagBadge>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n","import { faEye } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { ReactElement } from \"react\";\r\nimport \"./style.scss\";\r\n\r\ntype TViewsContainer = {\r\n  views: number;\r\n};\r\n\r\nexport const ViewsContainer: React.FC<TViewsContainer> = ({\r\n  views,\r\n}): ReactElement => {\r\n  return (\r\n    <div className=\"view-container\">\r\n      <div className=\"view-container__icon\">\r\n        <FontAwesomeIcon icon={faEye}></FontAwesomeIcon>\r\n      </div>\r\n      <div className=\"view-container__counter\">\r\n        <p>{views}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { getUpdatedPost } from \"@/store/posts.api\";\r\nimport { ratePost, ratePagedPost } from \"@/store/slices/PostsSlices\";\r\nimport { TPost } from \"@/types/types\";\r\nimport { useCallback } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\ninterface UseRatePostProps {\r\n  post: TPost;\r\n  getPost: <T>(endpoint: string) => Promise<T | undefined>;\r\n  patchPost: <T>(endpoint: string, data: any) => Promise<T | undefined>;\r\n}\r\n\r\nexport const useRatePost = ({ post, getPost, patchPost }: UseRatePostProps) => {\r\n  const dispatch = useDispatch();\r\n  const ratePostAsync = useCallback(\r\n    async (newRate: string | object) => {\r\n      const { rated, rate } = post;\r\n      const updatingPost = await getPost<TPost>(`posts/${post.id}`);\r\n      const basePostData = {\r\n        ...updatingPost,\r\n        user: post.user,\r\n        postImage: post.postImage\r\n      };\r\n      const updatePostReactions = async () => {\r\n        const updatedPost = getUpdatedPost(post.id);\r\n        await patchPost<TPost>(`posts/${post.id}`, {\r\n          reactions: updatedPost?.reactions,\r\n        });\r\n      };\r\n      if (rated && rate === newRate) {\r\n        dispatch(ratePost({ post: basePostData }));\r\n        await updatePostReactions();\r\n      } else if (rated && rate !== newRate) {\r\n        dispatch(\r\n          ratePost({\r\n            post: basePostData,\r\n            reaction: newRate,\r\n          })\r\n        );\r\n        await updatePostReactions();\r\n      } else {\r\n        dispatch(\r\n          ratePost({\r\n            post: basePostData,\r\n            reaction: newRate,\r\n          })\r\n        );\r\n        await updatePostReactions();\r\n      }\r\n    },\r\n    [post, dispatch, getPost, patchPost]\r\n  );\r\n\r\n  const ratePagedPostAsync = useCallback(\r\n    async (newRate: string | object) => {\r\n      const { rated, rate } = post;\r\n      const updatingPost = await getPost<TPost>(`posts/${post.id}`);\r\n      const basePostData = {\r\n        ...updatingPost,\r\n        user: post.user,\r\n        postImage: post.postImage\r\n      };\r\n      const updatePostReactions = async () => {\r\n        const updatedPost = getUpdatedPost(post.id);\r\n        await patchPost<TPost>(`posts/${post.id}`, {\r\n          reactions: updatedPost?.reactions,\r\n        });\r\n      };\r\n      if (rated && rate === newRate) {\r\n        dispatch(ratePagedPost({ post: basePostData }));\r\n        await updatePostReactions();\r\n      } else if (rated && rate !== newRate) {\r\n        dispatch(\r\n          ratePagedPost({\r\n            post: basePostData,\r\n            reaction: newRate,\r\n          })\r\n        );\r\n        await updatePostReactions();\r\n      } else {\r\n        dispatch(\r\n          ratePagedPost({\r\n            post: basePostData,\r\n            reaction: newRate,\r\n          })\r\n        );\r\n        await updatePostReactions();\r\n      }\r\n    },\r\n    [post, dispatch, getPost, patchPost]\r\n  );\r\n  return { ratePost: ratePostAsync, ratePagedPost: ratePagedPostAsync };\r\n};\r\n","import { TPost, TPostAppStore} from \"@/types/types\";\r\nimport { ReactElement } from \"react\";\r\nimport { BadgeContainer } from \"@/components/BadgeContainer\";\r\nimport { NavLink, useLocation } from \"react-router\";\r\nimport { Container } from \"@ui/Container\";\r\nimport { faThumbsUp } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { faThumbsDown } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { Button } from \"@ui/Button\";\r\nimport { ViewsContainer } from \"../ViewsContainer\";\r\nimport useFetch from \"@/hooks/useFetch\";\r\nimport { useRatePost } from \"@/hooks/useRatePost\";\r\nimport \"./style.scss\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\ntype TPostCardProps = {\r\n  link: string;\r\n  post: TPost;\r\n};\r\n\r\nexport const PostCard: React.FC<TPostCardProps> = ({\r\n  link,\r\n  post,\r\n}): ReactElement => {\r\n  const { pathname } = useLocation();\r\n  const postId = Number(pathname.split(\"/\").at(-1));\r\n  const { get, patch } = useFetch(`https://dummyjson.com`);\r\n  const { tag } = useSelector((state: TPostAppStore) => state.posts);\r\n  const { id : userId } = useSelector(\r\n    (state: TPostAppStore) => state.user.data\r\n  );\r\n  const { ratePost, ratePagedPost } = useRatePost({\r\n    post,\r\n    getPost: get,\r\n    patchPost: patch,\r\n  });\r\n  const ratePostAsync = async (newRate: string | object) => {\r\n    if (newRate === \"liked\") {\r\n      await ratePost(\"liked\");\r\n    } else {\r\n      await ratePost(\"disliked\");\r\n    }\r\n  };\r\n  const ratePagedPostAsync = async (newRate: string | object) => {\r\n    if (newRate === \"liked\") {\r\n      await ratePagedPost(\"liked\");\r\n    } else {\r\n      await ratePagedPost(\"disliked\");\r\n    }\r\n  };\r\n  return (\r\n    <article className=\"post-card\">\r\n      <div className=\"post-card__header\">\r\n        {post.user ? (\r\n          <Container>\r\n            <img\r\n              src={post.user.image}\r\n              alt={post.user.firstName + \" \" + post.user.lastName + \" avatar\"}\r\n            />\r\n            <h5>{post.user.firstName + \" \" + post.user.lastName}</h5>\r\n          </Container>\r\n        ) : <div></div>}\r\n        <BadgeContainer tags={post.tags} tagsStore={tag} />\r\n      </div>\r\n      <div className=\"post-card__body\">\r\n        <h2>{post.title}</h2>\r\n\r\n        {postId ? (\r\n          <img src={post.postImage} alt={post.title} />\r\n        ) : (\r\n          <NavLink to={link}>\r\n            <img src={post.postImage} alt={post.title} />\r\n          </NavLink>\r\n        )}\r\n        {postId ? <p>{post.body}</p> : <NavLink to={link}>{post.body}</NavLink>}\r\n      </div>\r\n      <div className=\"post-card__footer\">\r\n        <ViewsContainer views={post.views} />\r\n        <Container>\r\n          <Button\r\n            icon={faThumbsUp}\r\n            action={!postId ? ratePostAsync : ratePagedPostAsync}\r\n            payload={\"liked\"}\r\n            isAuthOnly={true}\r\n            disabled={post.userId === userId}\r\n            style={{color:'blue'}}\r\n          >\r\n            {post.reactions.likes}\r\n          </Button>\r\n          <Button\r\n            icon={faThumbsDown}\r\n            action={!postId ? ratePostAsync : ratePagedPostAsync}\r\n            payload={\"disliked\"}\r\n            isAuthOnly={true}\r\n            disabled={post.userId === userId}\r\n            style={{color:'red'}}\r\n          >\r\n            {post.reactions.dislikes}\r\n          </Button>\r\n        </Container>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n","import { TPost, TPostAppStore } from \"@/types/types\";\r\nimport { ReactElement, useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { PostCard } from \"../PostCard\";\r\nimport { fetchUserPosts } from \"@/store/slices/utils\";\r\n\r\nconst UserPosts = (): ReactElement => {\r\n  const { data } = useSelector((state: TPostAppStore) => state.user);\r\n  const [userPosts, setUserPosts] = useState<TPost[] | []>();\r\n  useEffect(() => {\r\n    if (data.id) {\r\n      fetchUserPosts(data.id, setUserPosts);\r\n    }\r\n  }, [data.id]);\r\n  return (\r\n    <div>\r\n      <h3>My posts:</h3>\r\n      {data &&\r\n        userPosts &&\r\n        userPosts?.map((post) => (\r\n          <PostCard key={post.id} post={post} link={`/posts/${post.id}`} />\r\n        ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserPosts;\r\n"],"names":["TagBadge","_ref","children","slug","action","disabled","tagStore","_jsx","className","includes","onClick","Container","BadgeContainer","tags","tagsStore","dispatch","useDispatch","sortByTag","fetchPostsByTag","map","tag","index","ViewsContainer","views","_jsxs","FontAwesomeIcon","icon","faEye","PostCard","link","post","pathname","useLocation","postId","Number","split","at","get","patch","useFetch","useSelector","state","posts","id","userId","user","data","ratePost","ratePagedPost","getPost","patchPost","useCallback","async","rated","rate","basePostData","postImage","updatePostReactions","updatedPost","getUpdatedPost","reactions","newRate","reaction","useRatePost","ratePostAsync","ratePagedPostAsync","src","image","alt","firstName","lastName","title","NavLink","to","body","Button","faThumbsUp","payload","isAuthOnly","style","color","likes","faThumbsDown","dislikes","UserPosts","userPosts","setUserPosts","useState","useEffect","fetchUserPosts"],"sourceRoot":""}