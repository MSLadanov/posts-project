"use strict";(self.webpackChunkposts_project=self.webpackChunkposts_project||[]).push([[306],{151:(s,e,t)=>{t.d(e,{E:()=>c});var a=t(579);const c=s=>{let{children:e,slug:t,action:c,disabled:r=!1,tagStore:i}=s;return(0,a.jsx)("button",{className:i.includes(t)?"tag-badge__active":"tag-badge",disabled:r,onClick:()=>{c(t)},children:(0,a.jsx)("p",{children:e})})}},306:(s,e,t)=>{t.r(e),t.d(e,{default:()=>b});var a=t(43),c=t(260),r=t(941),i=t(3),n=t(891),l=t(929),d=t(655),o=t(325),m=t(88);var u=t(579);const h=s=>{let{comment:e}=s;const{patch:t}=(0,m.A)("https://dummyjson.com"),{commentState:c,rateComment:r}=(s=>{let{comment:e,patch:t}=s;const[c,r]=(0,a.useState)(e),i=(0,a.useCallback)((async()=>{const s=c.liked?c.likes-1:c.likes+1,a=!c.liked;r({...c,likes:s,liked:a});try{const a=await t(`comments/${e.id}`,{likes:s});a&&(a.likes!==s||a.liked)}catch(i){r(c),console.log(i)}}),[e.id,c,t]);return{commentState:c,rateComment:i}})({comment:e,patch:t}),{id:n}=(0,i.d4)((s=>s.user.data));return(0,u.jsxs)("div",{className:"comment-card",children:[(0,u.jsx)("div",{className:"comment-card__header",children:(0,u.jsxs)(o.m,{children:[(0,u.jsx)("img",{src:`https://dummyjson.com/icon/${c.user.username}/128`,alt:c.user.fullName+" avatar"}),(0,u.jsx)("h5",{children:c.user.fullName})]})}),(0,u.jsx)("div",{className:"comment-card__body",children:(0,u.jsx)("p",{children:c.body})}),(0,u.jsx)("div",{className:"comment-card__footer",children:(0,u.jsx)(o.m,{children:(0,u.jsx)(d.$,{icon:l.Wcv,action:r,disabled:e.user.id===n,isAuthOnly:!0,payload:"",style:{color:"blue"},children:c.likes})})})]})};var p=t(902),j=t(430);const x=()=>{const[s,e]=(0,a.useState)(""),{pathname:t}=(0,c.zy)(),r=(0,i.wA)(),{post:n}=(0,m.A)("https://dummyjson.com"),{id:o,username:h,firstName:x,lastName:v}=(0,i.d4)((s=>s.user.data)),g=Number(t.split("/").at(-1));return(0,u.jsxs)("div",{children:[(0,u.jsx)("img",{src:`https://dummyjson.com/icon/${h}/50`,alt:x+" "+v+" avatar"}),(0,u.jsx)(p.f,{label:"Comment text:",value:s,setValue:e}),(0,u.jsx)(d.$,{action:async()=>{const e={id:Math.floor(20001*Math.random())+1e4,body:s,postId:g,likes:0,user:{id:o,fullName:x+" "+v,username:h}};r((0,j.BC)(e)),await n("comments/add",e)},payload:s,icon:l.Bep,style:{color:"black"}})]})};var v=t(551);const g=s=>{let{postId:e}=s;const{data:t}=(0,i.d4)((s=>s.posts.comments)),c=(0,i.wA)();return(0,a.useEffect)((()=>{c((0,r.bM)(e))}),[e]),(0,u.jsxs)("div",{children:[(0,u.jsx)(v.Q,{children:(0,u.jsx)(x,{})}),t.map((s=>(0,u.jsx)(h,{comment:s},s.id)))]})},y=()=>{const{pathname:s}=(0,c.zy)(),e=Number(s.split("/").at(-1)),t=(0,i.wA)(),{data:l,loading:d}=(0,i.d4)((s=>s.posts.post)),o=(0,a.useRef)(!1);return(0,a.useEffect)((()=>{o.current?t((0,r.b$)(e)):o.current=!0}),[t,e]),"succeeded"===d?(0,u.jsxs)("div",{className:"post-page",children:[(0,u.jsx)(n.L,{post:l}),(0,u.jsx)(g,{postId:e})]}):null},b=()=>{const{pathname:s}=(0,c.zy)(),e=Number(s.split("/").at(-1)),t=(0,i.wA)();return(0,a.useEffect)((()=>{"number"!==typeof e&&t((0,r.b$)(e))}),[e,t]),(0,u.jsx)("main",{children:(0,u.jsx)(y,{})})}},325:(s,e,t)=>{t.d(e,{m:()=>c});var a=t(579);const c=s=>{let{children:e}=s;return(0,a.jsx)("div",{className:"container",children:e})}},551:(s,e,t)=>{t.d(e,{Q:()=>r});var a=t(791),c=t(579);const r=s=>{let{children:e}=s;const{isLogged:t}=(0,a.N)();return t?(0,c.jsx)(c.Fragment,{children:e}):(0,c.jsx)("div",{})}},704:(s,e,t)=>{t.d(e,{R:()=>v});var a=t(151),c=t(3),r=t(941),i=t(579);const n=s=>{let{tags:e,tagsStore:t}=s;const n=(0,c.wA)(),l=s=>{n((0,r.DD)(s))};return(0,i.jsx)("div",{className:"badge-container",children:e.map(((s,e)=>(0,i.jsx)(a.E,{slug:s,action:l,tagStore:t,children:s},e)))})};var l=t(260),d=t(325),o=t(929),m=t(655),u=t(910);const h=s=>{let{views:e}=s;return(0,i.jsxs)("div",{className:"view-container",children:[(0,i.jsx)("div",{className:"view-container__icon",children:(0,i.jsx)(u.g,{icon:o.pS3})}),(0,i.jsx)("div",{className:"view-container__counter",children:(0,i.jsx)("p",{children:e})})]})};var p=t(88),j=t(430),x=t(43);const v=s=>{let{link:e,post:t}=s;const{pathname:a}=(0,l.zy)(),u=Number(a.split("/").at(-1)),{get:v,patch:g}=(0,p.A)("https://dummyjson.com"),{tag:y}=(0,c.d4)((s=>s.posts)),{id:b}=(0,c.d4)((s=>s.user.data)),{ratePost:k,ratePagedPost:N}=(s=>{let{post:e,getPost:t,patchPost:a}=s;const i=(0,c.wA)();return{ratePost:(0,x.useCallback)((async s=>{const{rated:c,rate:n}=e,l={...await t(`posts/${e.id}`),user:e.user,postImage:e.postImage},d=async()=>{const s=(0,r.Af)(e.id);await a(`posts/${e.id}`,{reactions:null===s||void 0===s?void 0:s.reactions})};c&&n===s?(i((0,j.vj)({post:l})),await d()):(i((0,j.vj)({post:l,reaction:s})),await d())}),[e,i,t,a]),ratePagedPost:(0,x.useCallback)((async s=>{const{rated:c,rate:n}=e,l={...await t(`posts/${e.id}`),user:e.user,postImage:e.postImage},d=async()=>{const s=(0,r.Af)(e.id);await a(`posts/${e.id}`,{reactions:null===s||void 0===s?void 0:s.reactions})};c&&n===s?(i((0,j.kQ)({post:l})),await d()):(i((0,j.kQ)({post:l,reaction:s})),await d())}),[e,i,t,a])}})({post:t,getPost:v,patchPost:g}),w=async s=>{"liked"===s?await k("liked"):await k("disliked")},f=async s=>{"liked"===s?await N("liked"):await N("disliked")};return(0,i.jsxs)("article",{className:"post-card",children:[(0,i.jsxs)("div",{className:"post-card__header",children:[t.user?(0,i.jsxs)(d.m,{children:[(0,i.jsx)("img",{src:t.user.image,alt:t.user.firstName+" "+t.user.lastName+" avatar"}),(0,i.jsx)("h5",{children:t.user.firstName+" "+t.user.lastName})]}):(0,i.jsx)("div",{}),(0,i.jsx)(n,{tags:t.tags,tagsStore:y})]}),(0,i.jsxs)("div",{className:"post-card__body",children:[(0,i.jsx)("h2",{children:t.title}),u?(0,i.jsx)("img",{src:t.postImage,alt:t.title}):(0,i.jsx)(l.k2,{to:e,children:(0,i.jsx)("img",{src:t.postImage,alt:t.title})}),u?(0,i.jsx)("p",{children:t.body}):(0,i.jsx)(l.k2,{to:e,children:t.body})]}),(0,i.jsxs)("div",{className:"post-card__footer",children:[(0,i.jsx)(h,{views:t.views}),(0,i.jsxs)(d.m,{children:[(0,i.jsx)(m.$,{icon:o.Wcv,action:u?f:w,payload:"liked",isAuthOnly:!0,disabled:t.userId===b,style:{color:"blue"},children:t.reactions.likes}),(0,i.jsx)(m.$,{icon:o.lS9,action:u?f:w,payload:"disliked",isAuthOnly:!0,disabled:t.userId===b,style:{color:"red"},children:t.reactions.dislikes})]})]})]})}},891:(s,e,t)=>{t.d(e,{L:()=>i});var a=t(260),c=t(704),r=t(579);const i=s=>{let{post:e}=s;const t=(0,a.zy)();return(0,r.jsx)(c.R,{link:`${t.pathname}/${e.id}`,post:e})}},902:(s,e,t)=>{t.d(e,{f:()=>r});var a=t(43),c=t(579);const r=s=>{let{value:e,setValue:t,label:r,required:i=!1,rows:n=4}=s;const[l,d]=(0,a.useState)(!1),[o,m]=(0,a.useState)(!!e);return(0,a.useEffect)((()=>{m(!!e)}),[e]),(0,c.jsxs)("div",{className:`textarea-container ${l?"focused":""} ${o?"has-value":""}`,children:[r&&(0,c.jsxs)("label",{className:"textarea-label "+(l||o?"label-up":""),children:[r,i&&(0,c.jsx)("span",{className:"required-star",children:"*"})]}),(0,c.jsx)("textarea",{value:e,onChange:s=>t(s.target.value),onFocus:()=>d(!0),onBlur:()=>d(!1),className:"styled-textarea",rows:n}),(0,c.jsx)("div",{className:"textarea-underline",children:(0,c.jsx)("div",{className:"underline-animation "+(l?"active":"")})})]})}}}]);
//# sourceMappingURL=306.fcd7d684.chunk.js.map