"use strict";(self.webpackChunkstydy_repo=self.webpackChunkstydy_repo||[]).push([[306],{151:(e,s,t)=>{t.d(s,{E:()=>c});var a=t(579);const c=e=>{let{children:s,slug:t,action:c,disabled:r=!1,tagStore:i}=e;return(0,a.jsx)("button",{className:i.includes(t)?"tag-badge__active":"tag-badge",disabled:r,onClick:()=>{c(t)},children:(0,a.jsx)("p",{children:s})})}},306:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var a=t(43),c=t(260),r=t(941),i=t(3),n=t(891),l=t(929),d=t(655),o=t(325),m=t(88);var u=t(579);const h=e=>{let{comment:s}=e;const{patch:t}=(0,m.A)("https://dummyjson.com"),{commentState:c,rateComment:r}=(e=>{let{comment:s,patch:t}=e;const[c,r]=(0,a.useState)(s),i=(0,a.useCallback)((async()=>{const e=c.liked?c.likes-1:c.likes+1,a=!c.liked;r({...c,likes:e,liked:a});try{const a=await t(`comments/${s.id}`,{likes:e});a&&(a.likes!==e||a.liked)}catch(i){r(c),console.log(i)}}),[s.id,c,t]);return{commentState:c,rateComment:i}})({comment:s,patch:t}),{id:n}=(0,i.d4)((e=>e.user.data));return(0,u.jsxs)("div",{className:"comment-card",children:[(0,u.jsx)("div",{className:"comment-card__header",children:(0,u.jsxs)(o.m,{children:[(0,u.jsx)("img",{src:`https://dummyjson.com/icon/${c.user.username}/128`,alt:c.user.fullName+" avatar"}),(0,u.jsx)("h5",{children:c.user.fullName})]})}),(0,u.jsx)("div",{className:"comment-card__body",children:(0,u.jsx)("p",{children:c.body})}),(0,u.jsx)("div",{className:"comment-card__footer",children:(0,u.jsx)(o.m,{children:(0,u.jsx)(d.$,{icon:l.Wcv,action:r,disabled:s.user.id===n,isAuthOnly:!0,payload:"",style:{color:"blue"},children:c.likes})})})]})};var p=t(902),j=t(663);const x=()=>{const[e,s]=(0,a.useState)(""),{pathname:t}=(0,c.zy)(),r=(0,i.wA)(),{post:n}=(0,m.A)("https://dummyjson.com"),{id:o,username:h,firstName:x,lastName:v}=(0,i.d4)((e=>e.user.data)),y=Number(t.split("/").at(-1));return(0,u.jsxs)("div",{children:[(0,u.jsx)("img",{src:`https://dummyjson.com/icon/${h}/50`,alt:x+" "+v+" avatar"}),(0,u.jsx)(p.f,{label:"Comment text:",value:e,setValue:s}),(0,u.jsx)(d.$,{action:async()=>{const s={id:Math.floor(20001*Math.random())+1e4,body:e,postId:y,likes:0,user:{id:o,fullName:x+" "+v,username:h}};r((0,j.BC)(s)),await n("comments/add",s)},payload:e,icon:l.Bep,style:{color:"black"}})]})};var v=t(551);const y=e=>{let{postId:s}=e;const{data:t}=(0,i.d4)((e=>e.posts.comments)),c=(0,i.wA)();return(0,a.useEffect)((()=>{c((0,r.bM)(s))}),[s]),(0,u.jsxs)("div",{children:[(0,u.jsx)(v.Q,{children:(0,u.jsx)(x,{})}),t.map((e=>(0,u.jsx)(h,{comment:e},e.id)))]})},g=()=>{const{pathname:e}=(0,c.zy)(),s=Number(e.split("/").at(-1)),t=(0,i.wA)(),{data:l,loading:d}=(0,i.d4)((e=>e.posts.post)),o=(0,a.useRef)(!1);return(0,a.useEffect)((()=>{o.current?t((0,r.b$)(s)):o.current=!0}),[t,s]),"succeeded"===d?(0,u.jsxs)("div",{className:"post-page",children:[(0,u.jsx)(n.L,{post:l}),(0,u.jsx)(y,{postId:s})]}):null},b=()=>{const{pathname:e}=(0,c.zy)(),s=Number(e.split("/").at(-1)),t=(0,i.wA)();return(0,a.useEffect)((()=>{"number"!==typeof s&&t((0,r.b$)(s))}),[s,t]),(0,u.jsx)("main",{children:(0,u.jsx)(g,{})})}},325:(e,s,t)=>{t.d(s,{m:()=>c});var a=t(579);const c=e=>{let{children:s}=e;return(0,a.jsx)("div",{className:"container",children:s})}},551:(e,s,t)=>{t.d(s,{Q:()=>r});var a=t(791),c=t(579);const r=e=>{let{children:s}=e;const{isLogged:t}=(0,a.N)();return t?(0,c.jsx)(c.Fragment,{children:s}):(0,c.jsx)("div",{})}},704:(e,s,t)=>{t.d(s,{R:()=>v});var a=t(151),c=t(3),r=t(941),i=t(579);const n=e=>{let{tags:s,tagsStore:t}=e;const n=(0,c.wA)(),l=e=>{n((0,r.DD)(e))};return(0,i.jsx)("div",{className:"badge-container",children:s.map(((e,s)=>(0,i.jsx)(a.E,{slug:e,action:l,tagStore:t,children:e},s)))})};var l=t(260),d=t(325),o=t(929),m=t(655),u=t(910);const h=e=>{let{views:s}=e;return(0,i.jsxs)("div",{className:"view-container",children:[(0,i.jsx)("div",{className:"view-container__icon",children:(0,i.jsx)(u.g,{icon:o.pS3})}),(0,i.jsx)("div",{className:"view-container__counter",children:(0,i.jsx)("p",{children:s})})]})};var p=t(88),j=t(663),x=t(43);const v=e=>{let{link:s,post:t}=e;const{pathname:a}=(0,l.zy)(),u=Number(a.split("/").at(-1)),{get:v,patch:y}=(0,p.A)("https://dummyjson.com"),{tag:g}=(0,c.d4)((e=>e.posts)),{id:b}=(0,c.d4)((e=>e.user.data)),{ratePost:k,ratePagedPost:N}=(e=>{let{post:s,getPost:t,patchPost:a}=e;const i=(0,c.wA)();return{ratePost:(0,x.useCallback)((async e=>{const{rated:c,rate:n}=s,l={...await t(`posts/${s.id}`),user:s.user,postImage:s.postImage},d=async()=>{const e=(0,r.Af)(s.id);await a(`posts/${s.id}`,{reactions:null===e||void 0===e?void 0:e.reactions})};c&&n===e?(i((0,j.vj)({post:l})),await d()):(i((0,j.vj)({post:l,reaction:e})),await d())}),[s,i,t,a]),ratePagedPost:(0,x.useCallback)((async e=>{const{rated:c,rate:n}=s,l={...await t(`posts/${s.id}`),user:s.user,postImage:s.postImage},d=async()=>{const e=(0,r.Af)(s.id);await a(`posts/${s.id}`,{reactions:null===e||void 0===e?void 0:e.reactions})};c&&n===e?(i((0,j.kQ)({post:l})),await d()):(i((0,j.kQ)({post:l,reaction:e})),await d())}),[s,i,t,a])}})({post:t,getPost:v,patchPost:y}),w=async e=>{"liked"===e?await k("liked"):await k("disliked")},f=async e=>{"liked"===e?await N("liked"):await N("disliked")};return(0,i.jsxs)("article",{className:"post-card",children:[(0,i.jsxs)("div",{className:"post-card__header",children:[t.user?(0,i.jsxs)(d.m,{children:[(0,i.jsx)("img",{src:t.user.image,alt:t.user.firstName+" "+t.user.lastName+" avatar"}),(0,i.jsx)("h5",{children:t.user.firstName+" "+t.user.lastName})]}):(0,i.jsx)("div",{}),(0,i.jsx)(n,{tags:t.tags,tagsStore:g})]}),(0,i.jsxs)("div",{className:"post-card__body",children:[(0,i.jsx)("h2",{children:t.title}),u?(0,i.jsx)("img",{src:t.postImage,alt:t.title}):(0,i.jsx)(l.k2,{to:s,children:(0,i.jsx)("img",{src:t.postImage,alt:t.title})}),u?(0,i.jsx)("p",{children:t.body}):(0,i.jsx)(l.k2,{to:s,children:t.body})]}),(0,i.jsxs)("div",{className:"post-card__footer",children:[(0,i.jsx)(h,{views:t.views}),(0,i.jsxs)(d.m,{children:[(0,i.jsx)(m.$,{icon:o.Wcv,action:u?f:w,payload:"liked",isAuthOnly:!0,disabled:t.userId===b,style:{color:"blue"},children:t.reactions.likes}),(0,i.jsx)(m.$,{icon:o.lS9,action:u?f:w,payload:"disliked",isAuthOnly:!0,disabled:t.userId===b,style:{color:"red"},children:t.reactions.dislikes})]})]})]})}},891:(e,s,t)=>{t.d(s,{L:()=>i});var a=t(260),c=t(704),r=t(579);const i=e=>{let{post:s}=e;const t=(0,a.zy)();return(0,r.jsx)(c.R,{link:`${t.pathname}/${s.id}`,post:s})}},902:(e,s,t)=>{t.d(s,{f:()=>r});var a=t(43),c=t(579);const r=e=>{let{value:s,setValue:t,label:r,required:i=!1,rows:n=4}=e;const[l,d]=(0,a.useState)(!1),[o,m]=(0,a.useState)(!!s);return(0,a.useEffect)((()=>{m(!!s)}),[s]),(0,c.jsxs)("div",{className:`textarea-container ${l?"focused":""} ${o?"has-value":""}`,children:[r&&(0,c.jsxs)("label",{className:"textarea-label "+(l||o?"label-up":""),children:[r,i&&(0,c.jsx)("span",{className:"required-star",children:"*"})]}),(0,c.jsx)("textarea",{value:s,onChange:e=>t(e.target.value),onFocus:()=>d(!0),onBlur:()=>d(!1),className:"styled-textarea",rows:n}),(0,c.jsx)("div",{className:"textarea-underline",children:(0,c.jsx)("div",{className:"underline-animation "+(l?"active":"")})})]})}}}]);
//# sourceMappingURL=306.b748f5a8.chunk.js.map