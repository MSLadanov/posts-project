"use strict";(self.webpackChunkposts_project=self.webpackChunkposts_project||[]).push([[594],{151:(s,e,t)=>{t.d(e,{E:()=>i});var a=t(579);const i=s=>{let{children:e,slug:t,action:i,disabled:l=!1,tagStore:r}=s;return(0,a.jsx)("button",{className:r.includes(t)?"tag-badge__active":"tag-badge",disabled:l,onClick:()=>{i(t)},children:(0,a.jsx)("p",{children:e})})}},325:(s,e,t)=>{t.d(e,{m:()=>i});var a=t(579);const i=s=>{let{children:e}=s;return(0,a.jsx)("div",{className:"container",children:e})}},551:(s,e,t)=>{t.d(e,{Q:()=>l});var a=t(791),i=t(579);const l=s=>{let{children:e}=s;const{isLogged:t}=(0,a.N)();return t?(0,i.jsx)(i.Fragment,{children:e}):(0,i.jsx)("div",{})}},594:(s,e,t)=>{t.r(e),t.d(e,{default:()=>S});var a=t(43);var i=t(941),l=t(3),r=t(645),o=t(579);const c=()=>{const[s,e]=(0,a.useState)(""),t=function(s,e){const[t,i]=(0,a.useState)(s);return(0,a.useEffect)((()=>{const t=setTimeout((()=>{i(s)}),e);return()=>{clearTimeout(t)}}),[e,s]),t}(s,500),c=(0,l.wA)();return(0,a.useEffect)((()=>{s&&c((0,i.Bs)(s))}),[t]),(0,o.jsx)("div",{children:(0,o.jsx)(r.p,{type:"text",value:s,setValue:e,label:"Search post...",name:"search-query"})})},n=s=>{let{defaultValue:e,options:t,setValue:a}=s;return(0,o.jsxs)("select",{className:"custom-select",defaultValue:e,onChange:s=>a(s.target.value),children:[(0,o.jsx)("option",{disabled:!0,className:"custom-select-default-option",children:e}),t.map(((s,e)=>(0,o.jsx)("option",{className:"custom-select-option",children:s},e)))]})};var d=t(430);const u=()=>{const[s,e]=(0,a.useState)(""),t=(0,l.wA)();return(0,a.useEffect)((()=>{t((0,d.di)(s))}),[s,t]),(0,o.jsx)("div",{children:(0,o.jsx)(n,{options:["Likes","Dislikes","Views"],defaultValue:"------",setValue:e})})};var p=t(151);const x=s=>{let{getSlug:e,tagStore:t}=s;const{data:a}=(0,l.d4)((s=>s.posts.postsTags));return(0,o.jsx)(o.Fragment,{children:a&&(0,o.jsxs)("div",{className:"tag-box",children:[" ",a.map((s=>(0,o.jsx)(p.E,{slug:s.slug,action:e,tagStore:t,children:s.name},s.slug)))]})})},m=()=>{const s=(0,l.wA)(),{tag:e}=(0,l.d4)((s=>s.posts));return(0,o.jsxs)("div",{className:"posts-filter",children:[(0,o.jsx)(c,{}),(0,o.jsx)("h4",{children:"Sort by:"}),(0,o.jsx)(u,{}),(0,o.jsx)(x,{getSlug:e=>{s((0,i.DD)(e))},tagStore:e})]})};var j=t(891),h=t(902),g=t(655),v=t(929),w=t(63),N=t(88),y=t(137);const b=()=>{const{id:s,firstName:e,lastName:t,image:i}=(0,l.d4)((s=>s.user.data)),[c,n]=(0,a.useState)(!1),u=(0,l.wA)(),[p,m]=(0,a.useState)(""),[j,b]=(0,a.useState)(""),[f,k]=(0,a.useState)([]),{notify:S,notifyPortal:_}=(0,y.l)(),{post:A}=(0,N.A)("https://dummyjson.com");return(0,o.jsxs)("div",{children:[(0,o.jsx)(g.$,{icon:c?v.$_H:v.cUH,style:{color:"black"},action:()=>n((s=>!s)),children:"Write post"}),(0,o.jsxs)("div",{className:c?"post-input__visible":"post-input",children:[(0,o.jsx)("h4",{children:"Choose tags:"}),(0,o.jsx)(x,{getSlug:s=>{k([...f,s])},tagStore:f}),(0,o.jsx)(r.p,{value:j,setValue:b,type:"text",label:"Post title:",name:"post-title"}),(0,o.jsx)(h.f,{value:p,setValue:m,label:"Post text:"}),(0,o.jsx)(g.$,{action:async()=>{const a={id:Math.floor(20001*Math.random())+1e4,userId:s,user:{firstName:e,lastName:t,image:i},comments:[],rate:"",postImage:await(0,w.aK)(j),rated:!1,title:j,body:p,tags:f,views:0,reactions:{likes:0,dislikes:0}};u((0,d.SD)(a)),S("New post added!","success"),await A("posts/add",a)},payload:{body:p,title:j,tags:f},icon:v.isI,style:{color:"black"},children:"Send post"})]}),_]})};var f=t(551);const k=()=>{const s=(0,l.wA)(),{data:e}=(0,l.d4)((s=>s.posts.postsList));return(0,a.useEffect)((()=>{s((0,i.y9)()),s((0,i.un)())}),[s]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.Q,{children:(0,o.jsx)(b,{})}),(0,o.jsx)("div",{className:"post-list",children:e.map((s=>(0,o.jsx)(j.L,{post:s},s.id)))})]})},S=()=>(0,o.jsxs)("main",{children:[(0,o.jsx)(m,{}),(0,o.jsx)(k,{})]})},704:(s,e,t)=>{t.d(e,{R:()=>g});var a=t(151),i=t(3),l=t(941),r=t(579);const o=s=>{let{tags:e,tagsStore:t}=s;const o=(0,i.wA)(),c=s=>{o((0,l.DD)(s))};return(0,r.jsx)("div",{className:"badge-container",children:e.map(((s,e)=>(0,r.jsx)(a.E,{slug:s,action:c,tagStore:t,children:s},e)))})};var c=t(260),n=t(325),d=t(929),u=t(655),p=t(910);const x=s=>{let{views:e}=s;return(0,r.jsxs)("div",{className:"view-container",children:[(0,r.jsx)("div",{className:"view-container__icon",children:(0,r.jsx)(p.g,{icon:d.pS3})}),(0,r.jsx)("div",{className:"view-container__counter",children:(0,r.jsx)("p",{children:e})})]})};var m=t(88),j=t(430),h=t(43);const g=s=>{let{link:e,post:t}=s;const{pathname:a}=(0,c.zy)(),p=Number(a.split("/").at(-1)),{get:g,patch:v}=(0,m.A)("https://dummyjson.com"),{tag:w}=(0,i.d4)((s=>s.posts)),{id:N}=(0,i.d4)((s=>s.user.data)),{ratePost:y,ratePagedPost:b}=(s=>{let{post:e,getPost:t,patchPost:a}=s;const r=(0,i.wA)();return{ratePost:(0,h.useCallback)((async s=>{const{rated:i,rate:o}=e,c={...await t(`posts/${e.id}`),user:e.user,postImage:e.postImage},n=async()=>{const s=(0,l.Af)(e.id);await a(`posts/${e.id}`,{reactions:null===s||void 0===s?void 0:s.reactions})};i&&o===s?(r((0,j.vj)({post:c})),await n()):(r((0,j.vj)({post:c,reaction:s})),await n())}),[e,r,t,a]),ratePagedPost:(0,h.useCallback)((async s=>{const{rated:i,rate:o}=e,c={...await t(`posts/${e.id}`),user:e.user,postImage:e.postImage},n=async()=>{const s=(0,l.Af)(e.id);await a(`posts/${e.id}`,{reactions:null===s||void 0===s?void 0:s.reactions})};i&&o===s?(r((0,j.kQ)({post:c})),await n()):(r((0,j.kQ)({post:c,reaction:s})),await n())}),[e,r,t,a])}})({post:t,getPost:g,patchPost:v}),f=async s=>{"liked"===s?await y("liked"):await y("disliked")},k=async s=>{"liked"===s?await b("liked"):await b("disliked")};return(0,r.jsxs)("article",{className:"post-card",children:[(0,r.jsxs)("div",{className:"post-card__header",children:[t.user?(0,r.jsxs)(n.m,{children:[(0,r.jsx)("img",{src:t.user.image,alt:t.user.firstName+" "+t.user.lastName+" avatar"}),(0,r.jsx)("h5",{children:t.user.firstName+" "+t.user.lastName})]}):(0,r.jsx)("div",{}),(0,r.jsx)(o,{tags:t.tags,tagsStore:w})]}),(0,r.jsxs)("div",{className:"post-card__body",children:[(0,r.jsx)("h2",{children:t.title}),p?(0,r.jsx)("img",{src:t.postImage,alt:t.title}):(0,r.jsx)(c.k2,{to:e,children:(0,r.jsx)("img",{src:t.postImage,alt:t.title})}),p?(0,r.jsx)("p",{children:t.body}):(0,r.jsx)(c.k2,{to:e,children:t.body})]}),(0,r.jsxs)("div",{className:"post-card__footer",children:[(0,r.jsx)(x,{views:t.views}),(0,r.jsxs)(n.m,{children:[(0,r.jsx)(u.$,{icon:d.Wcv,action:p?k:f,payload:"liked",isAuthOnly:!0,disabled:t.userId===N,style:{color:"blue"},children:t.reactions.likes}),(0,r.jsx)(u.$,{icon:d.lS9,action:p?k:f,payload:"disliked",isAuthOnly:!0,disabled:t.userId===N,style:{color:"red"},children:t.reactions.dislikes})]})]})]})}},891:(s,e,t)=>{t.d(e,{L:()=>r});var a=t(260),i=t(704),l=t(579);const r=s=>{let{post:e}=s;const t=(0,a.zy)();return(0,l.jsx)(i.R,{link:`${t.pathname}/${e.id}`,post:e})}},902:(s,e,t)=>{t.d(e,{f:()=>l});var a=t(43),i=t(579);const l=s=>{let{value:e,setValue:t,label:l,required:r=!1,rows:o=4}=s;const[c,n]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!!e);return(0,a.useEffect)((()=>{u(!!e)}),[e]),(0,i.jsxs)("div",{className:`textarea-container ${c?"focused":""} ${d?"has-value":""}`,children:[l&&(0,i.jsxs)("label",{className:"textarea-label "+(c||d?"label-up":""),children:[l,r&&(0,i.jsx)("span",{className:"required-star",children:"*"})]}),(0,i.jsx)("textarea",{value:e,onChange:s=>t(s.target.value),onFocus:()=>n(!0),onBlur:()=>n(!1),className:"styled-textarea",rows:o}),(0,i.jsx)("div",{className:"textarea-underline",children:(0,i.jsx)("div",{className:"underline-animation "+(c?"active":"")})})]})}}}]);
//# sourceMappingURL=594.88be24ac.chunk.js.map